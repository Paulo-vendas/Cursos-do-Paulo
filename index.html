<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cursos do Paulo</title>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    text-align:center;
}

.container{
    background:#1e293b;
    padding:20px;
    margin:50px auto;
    max-width:400px;
    border-radius:10px;
}

input, button{
    width:90%;
    padding:10px;
    margin:5px;
}

button{
    background:#2563eb;
    color:white;
    border:none;
    cursor:pointer;
}

.curso{
    background:#334155;
    padding:10px;
    margin:10px;
}
</style>
</head>

<body>

<div class="container" id="login">
<h2>Cursos do Paulo</h2>

<input id="usuario" placeholder="Usuário">
<input id="senha" type="password" placeholder="Senha">

<button onclick="cadastrar()">Cadastrar</button>
<button onclick="entrar()">Entrar</button>

<p id="msg"></p>
</div>

<div id="cursos" style="display:none;">
<h2>Cursos disponíveis</h2>

<div class="curso">
<h3>Curso Python</h3>
<p>Valor: R$ 50</p>
<button onclick="comprar('Python')">Comprar</button>
</div>

<div class="curso">
<h3>Curso HTML</h3>
<p>Valor: R$ 30</p>
<button onclick="comprar('HTML')">Comprar</button>
</div>

</div>

<script>
// Função cadastrar
async function cadastrar(){
    const user = document.getElementById("usuario").value
    const pass = document.getElementById("senha").value
    const msg = document.getElementById("msg")

    if(!user || !pass){
        msg.innerText = "Preencha usuário e senha"
        return
    }

    try {
        const res = await fetch("http://localhost:3000/cadastrar", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({usuario:user, senha:pass})
        })
        const data = await res.json()
        msg.innerText = data.msg
    } catch(e){
        msg.innerText = "Erro no servidor!"
    }
}

// Função login
async function entrar(){
    const user = document.getElementById("usuario").value
    const pass = document.getElementById("senha").value
    const msg = document.getElementById("msg")

    try {
        const res = await fetch("http://localhost:3000/login", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({usuario:user, senha:pass})
        })
        const data = await res.json()
        if(data.ok){
            document.getElementById("login").style.display="none"
            document.getElementById("cursos").style.display="block"
        } else {
            msg.innerText = data.msg
        }
    } catch(e){
        msg.innerText = "Erro no servidor!"
    }
}

// Função comprar
function comprar(nome){
    alert("Compra registrada: "+nome)
}
</script>

</body>
</html>
