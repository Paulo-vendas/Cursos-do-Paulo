<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cursos do Paulo</title>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    text-align:center;
}

.container{
    background:#1e293b;
    padding:20px;
    margin:50px auto;
    max-width:400px;
    border-radius:10px;
}

input, button{
    width:90%;
    padding:10px;
    margin:5px;
}

button{
    background:#2563eb;
    color:white;
    border:none;
}

.curso{
    background:#334155;
    padding:10px;
    margin:10px;
}
</style>
</head>

<body>

<div class="container" id="login">

<h2>Cursos do Paulo</h2>

<input id="usuario" placeholder="Usuário">
<input id="senha" type="password" placeholder="Senha">

<button onclick="cadastrar()">Cadastrar</button>
<button onclick="entrar()">Entrar</button>

<p id="msg"></p>

</div>

<div id="cursos" style="display:none;">

<h2>Cursos disponíveis</h2>

<div class="curso">
<h3>Curso Python</h3>
<button onclick="comprar('Python')">Comprar</button>
</div>

<div class="curso">
<h3>Curso HTML</h3>
<button onclick="comprar('HTML')">Comprar</button>
</div>

</div>

<script>

async function cadastrar(){

let user = document.getElementById("usuario").value
let pass = document.getElementById("senha").value

let res = await fetch("http://localhost:3000/cadastrar",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({usuario:user,senha:pass})
})

let data = await res.json()

document.getElementById("msg").innerText=data.msg

}

async function entrar(){

let user = document.getElementById("usuario").value
let pass = document.getElementById("senha").value

let res = await fetch("http://localhost:3000/login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({usuario:user,senha:pass})
})

let data = await res.json()

if(data.ok){

document.getElementById("login").style.display="none"
document.getElementById("cursos").style.display="block"

}else{

document.getElementById("msg").innerText=data.msg

}

}

function comprar(nome){

alert("Compra registrada: "+nome)

}

</script>

</body>
</html>
